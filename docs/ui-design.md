# Fortune Compass UI設計方針

## 1. 全体コンセプト

**テーマ: 「宇宙の神秘」**

神秘的でありながら、読みやすく使いやすいUI。ダークテーマをベースに、紫と金のアクセントで占いの世界観を演出する。

### デザイン原則
1. **明瞭性** — 占い結果が一目で分かる。スコアは数値 + 星で視覚化
2. **没入感** — ダークテーマ + グラデーションで神秘的な雰囲気を演出
3. **シンプルさ** — 1画面1目的。迷わない導線設計
4. **モバイルファースト** — スマホでの操作を最優先に設計

---

## 2. 画面別UI設計

### 2.1 トップページ（`/`）

```
┌──────────────────────────────┐
│  [ヘッダー] Fortune Compass  │
├──────────────────────────────┤
│                              │
│    ✦ Fortune Compass ✦      │
│    〜あなたの運命を照らす〜    │
│                              │
│  ┌──────────────────────┐    │
│  │  占いをはじめる →     │    │
│  └──────────────────────┘    │
│                              │
│  ─── 対応占術 ───           │
│                              │
│  ☆星座  🔢数秘  💧血液型  🃏タロット │
│  （アイコン + 名前の横並び）   │
│                              │
└──────────────────────────────┘
```

**要素:**
- ヒーローセクション: アプリタイトル + キャッチコピー
- CTAボタン: 「占いをはじめる」→ `/profile`（未登録時）or `/fortune`（登録済み時）
- 対応占術のアイコン一覧（装飾的）

**判定ロジック:**
- localStorageにプロフィールがあれば → `/fortune` へ
- なければ → `/profile` へ

---

### 2.2 プロフィール入力（`/profile`）

```
┌──────────────────────────────┐
│  [← 戻る]  プロフィール設定   │
├──────────────────────────────┤
│                              │
│  占いに必要な情報を          │
│  入力してください            │
│                              │
│  お名前（漢字）*            │
│  ┌──────────────────────┐    │
│  │ 山田太郎              │    │
│  └──────────────────────┘    │
│                              │
│  フリガナ *                  │
│  ┌──────────────────────┐    │
│  │ ヤマダタロウ          │    │
│  └──────────────────────┘    │
│                              │
│  生年月日 *                  │
│  ┌──────────────────────┐    │
│  │ 1990 / 05 / 15       │    │
│  └──────────────────────┘    │
│                              │
│  血液型                      │
│  [ A ] [ B ] [ O ] [ AB ]   │
│  （トグルボタン形式）         │
│                              │
│  ┌──────────────────────┐    │
│  │  保存して占いへ →     │    │
│  └──────────────────────┘    │
│                              │
└──────────────────────────────┘
```

**要素:**
- 名前: テキスト入力（必須）
- フリガナ: テキスト入力（必須、カタカナ）→ 内部でローマ字変換（数秘術用）
- 生年月日: 年/月/日のセレクト or date picker
- 血液型: A/B/O/AB の4択トグル（任意）
- 保存ボタン: localStorageに保存 → `/fortune` へ遷移

**バリデーション:**
- 名前: 1文字以上
- フリガナ: カタカナのみ
- 生年月日: 必須、未来の日付は不可
- 血液型: 未選択でもOK（血液型占いは使えない旨を表示）

---

### 2.3 占術選択（`/fortune`）

```
┌──────────────────────────────┐
│  [← 戻る]  占術を選ぶ        │
├──────────────────────────────┤
│                              │
│  こんにちは、山田太郎さん     │
│  牡牛座 ・ A型               │
│                              │
│  ┌────────┐  ┌────────┐     │
│  │  ☆    │  │  🔢   │     │
│  │ 星座   │  │ 数秘術 │     │
│  │ 占い   │  │        │     │
│  └────────┘  └────────┘     │
│                              │
│  ┌────────┐  ┌────────┐     │
│  │  💧   │  │  🃏   │     │
│  │ 血液型 │  │ タロット│     │
│  │ 占い   │  │ 占い   │     │
│  └────────┘  └────────┘     │
│                              │
│  [プロフィール編集]          │
│                              │
└──────────────────────────────┘
```

**要素:**
- ユーザー情報サマリ（名前、星座、血液型を自動表示）
- 4つの占術カード（2x2グリッド）
- 各カード: アイコン + 占術名
- カードタップ → 対応する占い結果ページへ
- 血液型未登録の場合、血液型占いカードはグレーアウト + 「血液型を登録してください」

---

### 2.4 星座占い結果（`/fortune/zodiac`）

```
┌──────────────────────────────┐
│  [← 占術選択]  星座占い       │
├──────────────────────────────┤
│                              │
│       ☆ 牡牛座 ☆            │
│       エレメント: 地          │
│                              │
│  ┌──────────────────────┐    │
│  │  今日の運勢           │    │
│  │  ★★★★☆  4/5       │    │
│  └──────────────────────┘    │
│                              │
│  ┌──────────────────────┐    │
│  │  ラッキーカラー       │    │
│  │  ■ グリーン          │    │
│  │                      │    │
│  │  ラッキーアイテム     │    │
│  │  観葉植物             │    │
│  └──────────────────────┘    │
│                              │
│  ┌──────────────────────┐    │
│  │  アドバイス           │    │
│  │  新しい出会いに恵まれ │    │
│  │  る一日です。積極的に │    │
│  │  行動しましょう。     │    │
│  └──────────────────────┘    │
│                              │
│  [他の占いを試す]            │
│                              │
└──────────────────────────────┘
```

**レイアウト構成:**
1. 星座名 + エレメント（ヒーロー部分）
2. スコアカード（大きく目立つ）
3. ラッキー情報カード
4. アドバイスカード
5. 導線ボタン（占術選択に戻る）

---

### 2.5 数秘術結果（`/fortune/numerology`）

```
┌──────────────────────────────┐
│  [← 占術選択]  数秘術        │
├──────────────────────────────┤
│                              │
│     あなたの運命数            │
│        ┌───┐                 │
│        │ 7 │  ← 大きく表示   │
│        └───┘                 │
│                              │
│  ┌──────────────────────┐    │
│  │  性格特徴             │    │
│  │  ・知的               │    │
│  │  ・分析的             │    │
│  │  ・内省的             │    │
│  └──────────────────────┘    │
│                              │
│  ┌──────────────────────┐    │
│  │  年運                 │    │
│  │  成長と学びの年       │    │
│  └──────────────────────┘    │
│                              │
│  ┌──────────────────────┐    │
│  │  相性の良い運命数     │    │
│  │  2, 4                │    │
│  └──────────────────────┘    │
│                              │
│  ┌──────────────────────┐    │
│  │  アドバイス           │    │
│  │  自分の直感を信じて...│    │
│  └──────────────────────┘    │
│                              │
└──────────────────────────────┘
```

**レイアウト構成:**
1. 運命数（大きな数字で中央表示、金色）
2. 性格特徴（バッジ or リスト形式）
3. 年運メッセージ
4. 相性の良い運命数
5. アドバイス

---

### 2.6 血液型占い結果（`/fortune/blood-type`）

```
┌──────────────────────────────┐
│  [← 占術選択]  血液型占い     │
├──────────────────────────────┤
│                              │
│       💧 A型 💧              │
│                              │
│  ┌──────────────────────┐    │
│  │  今日の運勢           │    │
│  │  ★★★★☆  4/5       │    │
│  └──────────────────────┘    │
│                              │
│  ┌──────────────────────┐    │
│  │  あなたの性格         │    │
│  │  几帳面で真面目、     │    │
│  │  協調性が高い         │    │
│  └──────────────────────┘    │
│                              │
│  ┌──────────────────────┐    │
│  │  相性ランキング       │    │
│  │  1位 A型  ♥♥♥       │    │
│  │  2位 AB型 ♥♥         │    │
│  │  3位 O型  ♥          │    │
│  │  4位 B型             │    │
│  └──────────────────────┘    │
│                              │
│  ┌──────────────────────┐    │
│  │  アドバイス           │    │
│  │  周囲との調和を...    │    │
│  └──────────────────────┘    │
│                              │
└──────────────────────────────┘
```

---

### 2.7 タロット占い結果（`/fortune/tarot`）

```
┌──────────────────────────────┐
│  [← 占術選択]  タロット占い   │
├──────────────────────────────┤
│                              │
│    3枚引き（過去・現在・未来） │
│                              │
│  ┌──────┐┌──────┐┌──────┐   │
│  │ 過去 ││ 現在 ││ 未来 │   │
│  │      ││      ││      │   │
│  │  0   ││  3   ││  17  │   │
│  │ 愚者 ││ 女帝 ││  星  │   │
│  │  正  ││  逆  ││  正  │   │
│  │      ││      ││      │   │
│  └──────┘└──────┘└──────┘   │
│                              │
│  ┌──────────────────────┐    │
│  │ 過去: 愚者（正位置）  │    │
│  │ 新しい始まり、自由... │    │
│  └──────────────────────┘    │
│                              │
│  ┌──────────────────────┐    │
│  │ 現在: 女帝（逆位置）  │    │
│  │ 過保護、依存、停滞... │    │
│  └──────────────────────┘    │
│                              │
│  ┌──────────────────────┐    │
│  │ 未来: 星（正位置）    │    │
│  │ 希望、再生...        │    │
│  └──────────────────────┘    │
│                              │
│  ┌──────────────────────┐    │
│  │  総合メッセージ       │    │
│  │  過去の冒険心が今の.. │    │
│  └──────────────────────┘    │
│                              │
└──────────────────────────────┘
```

**レイアウト構成:**
1. 3枚のカードを横並び（カード番号 + 名前 + 正逆表示）
2. 各カードの詳細（タップで展開 or 下にリスト表示）
3. 総合メッセージ

**カード表現（MVP）:**
- 画像なし。番号 + 名前 + 正逆をテキストで表示
- 背景色で正位置（紫）/ 逆位置（紫+反転表示）を区別
- 逆位置のカードは180度回転の表現（`rotate-180` + テキストは正位置）

---

## 3. 画面遷移フロー

```
トップページ（/）
    │
    ├─→ プロフィール入力（/profile）
    │       │
    │       └─→ 占術選択（/fortune）
    │               │
    │               ├─→ 総合ダッシュボード（/fortune/dashboard）
    │               │     └─→ レーダーチャート + 4占術サマリー
    │               │
    │               ├─→ 星座占い（/fortune/zodiac）
    │               │     └─→ 他占術ショートカット + SNSシェア
    │               ├─→ 数秘術（/fortune/numerology）
    │               │     └─→ 他占術ショートカット + SNSシェア
    │               ├─→ 血液型占い（/fortune/blood-type）
    │               │     └─→ 他占術ショートカット + SNSシェア
    │               └─→ タロット（/fortune/tarot）
    │                     └─→ 他占術ショートカット + SNSシェア
    │
    ├─→ 占術選択（/fortune）← プロフィール登録済みの場合
    │
    └─→ 占い履歴（/history）← ヘッダーから遷移
```

- 全結果画面に「他の占いも試す」ショートカット（OtherFortunes）で直接他占術へ遷移
- 全結果画面 + ダッシュボードにSNSシェアボタン
- ヘッダーにトップへのリンク + 履歴リンク常設
- 占術選択画面にダッシュボードバナー表示

---

## 4. ローディング状態

API呼び出し中の表示:

```
┌──────────────────────────────┐
│                              │
│        ✦ ✦ ✦                │
│     占っています...          │
│                              │
└──────────────────────────────┘
```

- 中央にパルスアニメーションする星（`animate-pulse`）
- テキスト: 「占っています...」

---

## 5. エラー状態

```
┌──────────────────────────────┐
│                              │
│   占いの実行に失敗しました    │
│                              │
│   [もう一度試す]             │
│                              │
└──────────────────────────────┘
```

- リトライボタンで再度API呼び出し
- `role="alert"` でスクリーンリーダーに通知
- 「占い一覧に戻る」リンク付き

---

## 6. カスタム404ページ

```
┌──────────────────────────────┐
│                              │
│        🧭 404                │
│                              │
│   ページが見つかりません      │
│   お探しのページは存在しない  │
│   か、移動された可能性があり  │
│   ます。                     │
│                              │
│   [トップページに戻る]       │
│                              │
└──────────────────────────────┘
```

- Compass アイコン + 404 表示
- トップページへの戻るリンク

---

## 7. 追加UI要素

### スキップナビゲーション
- ページ最上部に「メインコンテンツへスキップ」リンク（sr-only、フォーカスで表示）

### 言語切替（LanguageSwitcher）
- ヘッダー右側に Globe アイコン + "EN"/"JP" テキスト
- クリックで日本語/英語を切替（localStorage に保存）

### ローディング状態（更新）
- `role="status"` + `aria-live="polite"` でアクセシビリティ対応
- 「占い一覧に戻る」リンク付き

### アクセシビリティ対応
- 全インタラクティブ要素に `focus:ring-2 focus:ring-mystic-purple/60`
- フォーム要素に `aria-required`, `aria-invalid`, `aria-describedby`
- 血液型ボタンに `aria-pressed`
- スコア表示に `role="img"` + `aria-label="スコア: N点（5点満点）"`
- 装飾アイコンに `aria-hidden="true"`
- `<section>`, `<nav>`, `<fieldset>/<legend>` によるセマンティック構造

### OGP / SNS メタデータ
- Open Graph: title, description, url, siteName, locale, type, images
- Twitter Card: summary_large_image
- 動的OG画像: `opengraph-image.tsx`（Next.js ImageResponse API）

### PWA
- `manifest.json`: アプリ名、アイコン(192/512)、テーマカラー、表示モード
- SVG アイコン3種（通常192/512、マスカブル）

---

## 8. Phase 7/8 追加画面

### 8.1 総合運勢ダッシュボード（`/fortune/dashboard`）

```
┌──────────────────────────────┐
│  [← 占い一覧に戻る]          │
├──────────────────────────────┤
│                              │
│  総合運勢ダッシュボード       │
│  4つの占術から導き出された    │
│  今日の運勢                  │
│                              │
│  ┌──────────────────────┐    │
│  │  運勢レーダー         │    │
│  │                      │    │
│  │     総合運 4/5        │    │
│  │    ╱─────╲           │    │
│  │  仕事  ●   恋愛      │    │
│  │    ╲─────╱           │    │
│  │     金運 3/5          │    │
│  │                      │    │
│  └──────────────────────┘    │
│                              │
│  ┌──────────────────────┐    │
│  │ ✦ 今日の総合アドバイス │    │
│  │ 全体的にバランスの...  │    │
│  └──────────────────────┘    │
│                              │
│  ┌────────┐  ┌────────┐     │
│  │☆ 星座  │  │# 数秘術│     │
│  │牡牛座  │  │運命数3  │     │
│  │★★★★☆│  │創造性.. │     │
│  └────────┘  └────────┘     │
│  ┌────────┐  ┌────────┐     │
│  │💧血液型│  │🂡タロット│     │
│  │A型     │  │塔・星.. │     │
│  │★★★★☆│  │         │     │
│  └────────┘  └────────┘     │
│                              │
│  [X] [LINE] [FB] [📋]       │
│                              │
└──────────────────────────────┘
```

**レイアウト構成:**
1. SVGレーダーチャート（4軸: 総合運/恋愛運/仕事運/金運）
2. 総合アドバイスカード（Sparklesアイコン付き）
3. 4占術サマリーカード（2x2グリッド、各占術結果ページへリンク）
4. SNSシェアボタン

**特殊処理:**
- 血液型未設定時はグレーアウトカード（「プロフィールで血液型を設定すると結果が表示されます」）

### 8.2 占い履歴（`/history`）

```
┌──────────────────────────────┐
│  [← 占い一覧に戻る]          │
├──────────────────────────────┤
│                              │
│  占い履歴                    │
│  過去の占い結果を確認できます  │
│                              │
│  ┌──────────────────────┐    │
│  │  2/17 星座占い         │    │
│  │  牡牛座 ★★★★☆      │    │
│  └──────────────────────┘    │
│  ┌──────────────────────┐    │
│  │  2/17 数秘術           │    │
│  │  運命数: 3             │    │
│  └──────────────────────┘    │
│  ┌──────────────────────┐    │
│  │  2/16 タロット         │    │
│  │  塔・星・太陽          │    │
│  └──────────────────────┘    │
│         ...                  │
│                              │
│  [履歴をクリア]              │
│                              │
└──────────────────────────────┘
```

**要素:**
- 過去の占い結果リスト（最新順、最大50件）
- 各エントリ: 日付 + 占術名 + 結果サマリー
- 「履歴をクリア」ボタン（確認ダイアログ付き）
- 履歴が空の場合: 「まだ占い履歴がありません」メッセージ + 占い一覧へのリンク

### 8.3 占術選択画面 ダッシュボードバナー

占術選択画面（`/fortune`）上部に追加されたダッシュボード導線。

```
┌──────────────────────────────┐
│  ┌──────────────────────┐    │
│  │ 📊 総合運勢ダッシュボード │    │
│  │ 4つの占術を一括実行して │    │
│  │ レーダーチャートで可視化 │    │
│  └──────────────────────┘    │
│  （↑ グラデーション背景バナー）│
│                              │
│  ┌────────┐  ┌────────┐     │
│  │ 星座   │  │ 数秘術 │     │ ← 既存の4占術カード
│  └────────┘  └────────┘     │
│  ...                         │
└──────────────────────────────┘
```

### 8.4 OtherFortunes（他占術ショートカット）

全結果ページ下部に表示。現在の占術を除く3つの占術カードを表示。

```
── 他の占いも試す ──
┌────────┐ ┌────────┐ ┌────────┐
│ # 数秘術│ │💧血液型│ │🂡タロット│
│ 運命数で│ │ 相性を │ │ カードで│
│ 占う   │ │ 占う   │ │ 占う   │
└────────┘ └────────┘ └────────┘
```

### 8.5 ShareButtons（SNSシェアボタン）

全結果ページ + ダッシュボードに表示。

```
── 結果をシェアする ──
[X] [LINE] [Facebook] [📋コピー]
```

- 各ボタン: `bg-twilight` + 対応SNSアイコン
- クリップボードコピー時: 「コピーしました」フィードバック（2秒）
