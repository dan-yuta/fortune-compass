# Fortune Compass MVP — UXレビュー

> **レビュー対象**: spec-v1.md / design-system.md / ui-design.md
> **レビュー日**: 2026-02-16
> **観点**: ユーザビリティ / アクセシビリティ / 一貫性 / 導線設計 / エラーハンドリング

---

## 1. 総合評価

| 観点 | 評価 | コメント |
|------|------|---------|
| 導線設計 | A | トップ → プロフィール → 占術選択 → 結果の流れが明確 |
| 情報設計 | A | 1画面1目的の原則が守られている |
| 視覚的一貫性 | A | デザインシステムが詳細に定義されており統一感がある |
| アクセシビリティ | C | 色コントラスト・キーボード操作・スクリーンリーダー対応の記述が不足 |
| エラーハンドリング | B | 基本的なエラー画面はあるが、個別ケースの設計が不足 |
| モバイルUX | A | モバイルファーストで設計されており、タッチ操作を考慮 |

---

## 2. 良い点（Keep）

### 2.1 明確な導線設計
- localStorage にプロフィールがあるかで CTA の遷移先を分岐する設計が適切
- 全結果画面に「他の占いを試す」ボタンがあり、回遊性が高い
- ヘッダーにトップへのリンクを常設し、迷子を防止

### 2.2 情報の段階的開示
- 占術選択画面でユーザーサマリ（名前・星座・血液型）を表示し、入力済みであることを安心感とともに伝える
- 結果画面はカード単位で情報を分割し、視覚的な負荷を軽減

### 2.3 デザインシステムの網羅性
- カラー・タイポグラフィ・スペーシング・コンポーネントが細かく定義されている
- Tailwind CSS のカスタム設定まで記載されており、実装時のブレが少ない

### 2.4 血液型未登録時の制御
- 血液型占いカードをグレーアウト + 登録誘導する設計が丁寧

---

## 3. 改善提案（Improve）

### 3.1 アクセシビリティ — 重要度: 高

#### Issue: 色コントラスト不足の可能性
- **現状**: セカンダリテキスト `#a89ec4` on 背景 `#0f0a1e` のコントラスト比が WCAG AA 基準（4.5:1）を満たすか未検証
- **提案**: 主要な色の組み合わせについてコントラスト比を検証し、最低 4.5:1 を確保する
- **対象の組み合わせ**:
  - `#f0edf6`（プライマリテキスト）on `#0f0a1e`（背景）→ おそらくOK
  - `#a89ec4`（セカンダリテキスト）on `#0f0a1e`（背景）→ 要検証
  - `#a89ec4`（セカンダリテキスト）on `#1a1333`（カード背景）→ 要検証
  - `#6b6183`（ミュートテキスト）on `#251d3d`（入力フィールド）→ 要検証
- **優先度**: MVP後で可。ただし認識はしておく

#### Issue: キーボード操作・フォーカス管理
- **現状**: フォーカスリングの設計が入力フィールドのみ
- **提案**: ボタン・カード・リンクにもフォーカス可視スタイルを定義する
- **最低限**: `focus-visible:ring-2 focus-visible:ring-purple-500` を全インタラクティブ要素に適用

#### Issue: スクリーンリーダー対応
- **現状**: 記述なし
- **提案**: 以下の `aria` 属性を最低限追加
  - スコア表示: `aria-label="運勢スコア 5段階中4"` （星アイコンだけでは伝わらない）
  - タロット逆位置: `aria-label="女帝 逆位置"` （`rotate-180` の視覚表現だけでは不十分）
  - ローディング: `aria-live="polite"` で状態変化を通知

### 3.2 エラーハンドリング — 重要度: 中

#### Issue: プロフィール未登録での直接アクセス
- **現状**: `/fortune/zodiac` に直接アクセスした場合の挙動が未定義
- **提案**: プロフィール未登録時は `/profile` にリダイレクト + トースト通知「先にプロフィールを入力してください」
- **実装案**: 各占い結果ページの先頭で localStorage チェック → 未登録なら `router.push('/profile')`

#### Issue: ネットワークエラーとAPIエラーの区別
- **現状**: エラー画面が1パターンのみ
- **提案**: 以下の2パターンを区別
  - ネットワークエラー（バックエンド未起動等）: 「サーバーに接続できません。`npm run dev` を確認してください」
  - APIエラー（バリデーション等）: 「入力内容を確認してください」

#### Issue: localStorage の容量・破損対応
- **現状**: 記述なし
- **提案**: `storage.ts` で `try-catch` を入れ、パースエラー時はデータをクリアして `/profile` に誘導

### 3.3 マイクロインタラクション — 重要度: 低

#### Issue: タロットカードの体験
- **現状**: MVP ではテキスト表示のみ。アニメーションなし
- **提案（MVP範囲内で可能）**:
  - カード裏面 → 表面のフェードイン（`opacity 0→1` + `scale 0.95→1`、CSS のみで実装可）
  - 3枚を 0.3s ずつ遅延表示（`animation-delay`）
  - 工数: +15分程度
- **効果**: 占いの「結果が出る瞬間」の演出は UX に大きく寄与する

#### Issue: 占術選択画面のフィードバック
- **現状**: ホバー時に `translateY -2px` + ボーダー色変更
- **提案**: タップ時にも `scale(0.98)` の押下フィードバックを追加（`active:scale-[0.98]`）
- **工数**: +5分

### 3.4 導線の最適化 — 重要度: 中

#### Issue: 結果画面から他の占いへの直接遷移
- **現状**: 「他の占いを試す」→ `/fortune`（占術選択）に戻る
- **提案**: 結果画面の下部に他の3占術へのショートカットカードを表示
  ```
  ── 他の占いも試してみる ──
  [☆ 星座] [🔢 数秘術] [🃏 タロット]
  ```
- **効果**: 1タップ削減。回遊率向上
- **工数**: +10分

#### Issue: プロフィール編集への導線
- **現状**: 占術選択画面にのみ「プロフィール編集」リンク
- **提案**: ヘッダーのユーザーアイコンからもアクセス可能にする
- **工数**: +5分

### 3.5 コンテンツ設計 — 重要度: 中

#### Issue: 占い結果の説得力
- **現状**: アドバイスが1文のみ（例: 「新しい出会いに恵まれる一日です。」）
- **提案**: アドバイスを2〜3文に拡充し、具体的な行動指針を含める
  ```
  良い例: 「新しい出会いに恵まれる一日です。普段行かない場所に足を運んでみましょう。
          午後からの時間帯が特に好調です。」
  ```
- **工数**: データの拡充のみ。ロジック変更なし

#### Issue: 数秘術の運命数に対する説明不足
- **現状**: 運命数が大きく表示されるが、「運命数とは何か」の説明がない
- **提案**: 運命数の下に1行の説明を追加
  ```
  「運命数はあなたの生年月日から導かれる、人生の道を示す数字です」
  ```

---

## 4. 画面別レビュー

### 4.1 トップページ（/）

| 項目 | 評価 | コメント |
|------|------|---------|
| ファーストビュー | OK | タイトル + CTA が明確 |
| CTA文言 | OK | 「占いをはじめる」は直感的 |
| 占術アイコン一覧 | 注意 | 装飾的とあるがクリッカブルに見える可能性。`cursor-default` を明示するか、クリック可能にする |

### 4.2 プロフィール入力（/profile）

| 項目 | 評価 | コメント |
|------|------|---------|
| フォーム構成 | OK | 必要最小限の項目 |
| 血液型トグル | OK | 4択トグルは直感的 |
| バリデーション | 注意 | リアルタイムバリデーション vs 送信時バリデーションが未定義。**提案**: フィールドフォーカスアウト時にバリデーション |
| 生年月日入力 | 注意 | 「セレクト or date picker」が未確定。**提案**: 年・月・日の3つのセレクトボックス（date picker はモバイルブラウザ間で挙動が不安定） |
| フリガナ → ローマ字変換 | 注意 | 変換ロジックの正確性が UX に直結。「ヤマダ」→「yamada」が失敗すると数秘術の結果が不正確になる |

### 4.3 占術選択（/fortune）

| 項目 | 評価 | コメント |
|------|------|---------|
| ユーザーサマリ | OK | 安心感を与える良いデザイン |
| 2x2 グリッド | OK | 4占術の表示に最適 |
| グレーアウト | OK | 血液型未登録時の制御が適切 |

### 4.4 各占い結果画面

| 項目 | 評価 | コメント |
|------|------|---------|
| カード型レイアウト | OK | 情報が整理されている |
| スコア表示 | OK | 星 + 数値の併記で分かりやすい |
| タロット3枚並び | 注意 | モバイル（375px）で3枚横並びは窮屈。**提案**: モバイルでは横スクロール or 縦並びを検討 |

---

## 5. 推奨対応まとめ

### MVP内で対応（工数小）

| # | 改善内容 | 工数目安 | 影響度 |
|---|---------|---------|-------|
| 1 | プロフィール未登録時のリダイレクト | +10分 | 高 |
| 2 | localStorage の try-catch ガード | +5分 | 高 |
| 3 | 生年月日を3セレクトボックスに確定 | ±0分 | 中（仕様確定のみ） |
| 4 | タップ時の押下フィードバック | +5分 | 低 |
| 5 | タロットのフェードイン演出 | +15分 | 中 |
| 6 | aria-label の基本対応 | +10分 | 中 |

### MVP後に対応

| # | 改善内容 | 備考 |
|---|---------|------|
| 1 | 色コントラスト比の全面検証 | WCAG AA 準拠 |
| 2 | 結果画面から他占術への直接遷移 | 回遊率向上 |
| 3 | アドバイス文の拡充（2〜3文化） | データ拡充 |
| 4 | フリガナ → ローマ字変換の精度向上 | ライブラリ検討 |
| 5 | タロットカードのフリップアニメーション | framer-motion 導入後 |
| 6 | 完全なキーボードナビゲーション対応 | |

---

## 6. レビュー結論

全体として、MVP としての設計品質は高い。導線設計・情報設計・視覚的一貫性は十分に練られている。

最も優先すべき改善は **プロフィール未登録時のガード処理**（直接URL アクセス対策）と **localStorage のエラーハンドリング** の2点。これらは実装工数が小さく、ユーザー体験への影響が大きい。

アクセシビリティについてはMVP後の継続課題として認識し、まずは `aria-label` の基本対応から着手することを推奨する。
